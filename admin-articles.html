<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª - Ø¯. ÙˆØ³ÙŠÙ… | WiBo Health</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .editor-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .form-group input[type="text"],
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .form-group input[type="text"]:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 300px;
            resize: vertical;
            line-height: 1.8;
        }

        #articleContent[contenteditable] {
            min-height: 300px;
            max-height: 600px;
            overflow-y: auto;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            line-height: 1.8;
            font-size: 1em;
            font-family: inherit;
            outline: none;
            transition: border-color 0.3s;
        }

        #articleContent[contenteditable]:focus {
            border-color: #667eea;
        }

        #articleContent[contenteditable]:empty:before {
            content: attr(data-placeholder);
            color: #999;
        }

        .toolbar {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .toolbar button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toolbar button:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-save {
            background: #28a745;
            color: white;
        }

        .btn-save:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .btn-export {
            background: #007bff;
            color: white;
        }

        .btn-export:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
        }

        .btn-preview {
            background: #ffc107;
            color: #333;
        }

        .btn-preview:hover {
            background: #e0a800;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
        }

        .btn-clear {
            background: #dc3545;
            color: white;
        }

        .btn-clear:hover {
            background: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        .articles-list {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }

        .articles-list h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .article-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .article-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .article-info h3 {
            color: #333;
            margin-bottom: 5px;
        }

        .article-info p {
            color: #666;
            font-size: 0.9em;
        }

        .article-actions {
            display: flex;
            gap: 10px;
        }

        .article-actions button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-edit {
            background: #17a2b8;
            color: white;
        }

        .btn-edit:hover {
            background: #138496;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        .success-msg {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
            display: none;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
        }

        .modal-content h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .modal-content input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 15px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
        }

        .modal-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .color-btn {
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .color-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .article-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .article-actions {
                width: 100%;
            }

            .article-actions button {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-pen-fancy"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</h1>
            <p>Ø¯. ÙˆØ³ÙŠÙ… - WiBo Health</p>
        </div>

        <div class="main-content">
            <div class="success-msg" id="successMsg">
                <i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!
            </div>

            <div class="editor-section">
                <h2 style="margin-bottom: 20px; color: #333;">
                    <i class="fas fa-edit"></i> ÙƒØªØ§Ø¨Ø© Ù…Ù‚Ø§Ù„ Ø¬Ø¯ÙŠØ¯
                </h2>

                <div class="form-group">
                    <label for="articleTitle">
                        <i class="fas fa-heading"></i> Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„
                    </label>
                    <input type="text" id="articleTitle" placeholder="Ø§ÙƒØªØ¨ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„ Ù‡Ù†Ø§...">
                </div>

                <div class="form-group">
                    <label>
                        <i class="fas fa-tools"></i> Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªÙ†Ø³ÙŠÙ‚
                    </label>
                    <div class="toolbar">
                        <button onclick="formatText('bold')" title="Ù†Øµ Ø¹Ø±ÙŠØ¶">
                            <i class="fas fa-bold"></i> Ø¹Ø±ÙŠØ¶
                        </button>
                        <button onclick="formatText('italic')" title="Ù†Øµ Ù…Ø§Ø¦Ù„">
                            <i class="fas fa-italic"></i> Ù…Ø§Ø¦Ù„
                        </button>
                        <button onclick="formatText('underline')" title="ØªØ­ØªÙ‡ Ø®Ø·">
                            <i class="fas fa-underline"></i> ØªØ­ØªÙ‡ Ø®Ø·
                        </button>
                        <button onclick="insertHeading()" title="Ø¹Ù†ÙˆØ§Ù† ÙØ±Ø¹ÙŠ">
                            <i class="fas fa-heading"></i> Ø¹Ù†ÙˆØ§Ù† ÙØ±Ø¹ÙŠ
                        </button>
                        <button onclick="formatText('insertUnorderedList')" title="Ù‚Ø§Ø¦Ù…Ø©">
                            <i class="fas fa-list"></i> Ù‚Ø§Ø¦Ù…Ø©
                        </button>
                        <button onclick="openImageModal()" title="Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©">
                            <i class="fas fa-image"></i> ØµÙˆØ±Ø©
                        </button>
                        <button onclick="insertLink()" title="Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø·">
                            <i class="fas fa-link"></i> Ø±Ø§Ø¨Ø·
                        </button>
                        <button onclick="openColorModal()" title="Ù„ÙˆÙ† Ø§Ù„Ù†Øµ" style="background: linear-gradient(135deg, #ff6b6b, #feca57);">
                            <i class="fas fa-palette"></i> Ù„ÙˆÙ†
                        </button>
                        <button onclick="openHighlightModal()" title="ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ" style="background: linear-gradient(135deg, #feca57, #48dbfb);">
                            <i class="fas fa-highlighter"></i> ØªØ¸Ù„ÙŠÙ„
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="articleContent">
                        <i class="fas fa-file-alt"></i> Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø§Ù„
                    </label>
                    <div id="articleContent" contenteditable="true" data-placeholder="Ø§ÙƒØªØ¨ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø§Ù„ Ù‡Ù†Ø§...

Ø§Ø³ØªØ®Ø¯Ù… Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„ØªÙ„ÙˆÙŠÙ† ÙˆØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†Øµ!"></div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-save" onclick="saveArticle()">
                        <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ù…Ù‚Ø§Ù„
                    </button>
                    <button class="btn btn-export" onclick="exportArticle()">
                        <i class="fas fa-download"></i> ØªØµØ¯ÙŠØ± JSON
                    </button>
                    <button class="btn btn-preview" onclick="previewArticle()">
                        <i class="fas fa-eye"></i> Ù…Ø¹Ø§ÙŠÙ†Ø©
                    </button>
                    <button class="btn btn-clear" onclick="clearForm()">
                        <i class="fas fa-trash"></i> Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
                    </button>
                </div>
            </div>

            <div class="articles-list">
                <h2><i class="fas fa-list-alt"></i> Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h2>
                <div id="articlesList"></div>
            </div>
        </div>
    </div>

    <!-- Modal Ù„Ù„ØµÙˆØ± -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <h3><i class="fas fa-image"></i> Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©</h3>
            <input type="text" id="imageName" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙˆØ±Ø© (Ù…Ø«Ø§Ù„: photo1.jpg)">
            <p style="color: #666; font-size: 0.9em; margin-bottom: 15px;">
                Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹ ÙÙŠ Ù…Ø¬Ù„Ø¯ images/ Ø«Ù… Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ù‡Ø§ Ù‡Ù†Ø§
            </p>
            <div class="modal-buttons">
                <button style="background: #28a745; color: white;" onclick="insertImage()">
                    <i class="fas fa-check"></i> Ø¥Ø¶Ø§ÙØ©
                </button>
                <button style="background: #6c757d; color: white;" onclick="closeImageModal()">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Ù„Ù„Ø£Ù„ÙˆØ§Ù† -->
    <div class="modal" id="colorModal">
        <div class="modal-content">
            <h3><i class="fas fa-palette"></i> Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„Ù†Øµ</h3>
            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 20px 0;">
                <button class="color-btn" onclick="insertColor('#ff6b6b')" style="background: #ff6b6b; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø­Ù…Ø±"></button>
                <button class="color-btn" onclick="insertColor('#ee5a6f')" style="background: #ee5a6f; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø­Ù…Ø± ÙˆØ±Ø¯ÙŠ"></button>
                <button class="color-btn" onclick="insertColor('#ff8c42')" style="background: #ff8c42; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ"></button>
                <button class="color-btn" onclick="insertColor('#feca57')" style="background: #feca57; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£ØµÙØ±"></button>
                <button class="color-btn" onclick="insertColor('#48dbfb')" style="background: #48dbfb; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø²Ø±Ù‚ ÙØ§ØªØ­"></button>
                
                <button class="color-btn" onclick="insertColor('#0abde3')" style="background: #0abde3; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø²Ø±Ù‚"></button>
                <button class="color-btn" onclick="insertColor('#667eea')" style="background: #667eea; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø¨Ù†ÙØ³Ø¬ÙŠ"></button>
                <button class="color-btn" onclick="insertColor('#764ba2')" style="background: #764ba2; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø¨Ù†ÙØ³Ø¬ÙŠ ØºØ§Ù…Ù‚"></button>
                <button class="color-btn" onclick="insertColor('#00d2d3')" style="background: #00d2d3; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="ØªØ±ÙƒÙˆØ§Ø²"></button>
                <button class="color-btn" onclick="insertColor('#1dd1a1')" style="background: #1dd1a1; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø®Ø¶Ø± ÙØ§ØªØ­"></button>
                
                <button class="color-btn" onclick="insertColor('#10ac84')" style="background: #10ac84; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø®Ø¶Ø±"></button>
                <button class="color-btn" onclick="insertColor('#222f3e')" style="background: #222f3e; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø³ÙˆØ¯"></button>
                <button class="color-btn" onclick="insertColor('#5f27cd')" style="background: #5f27cd; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø¨Ù†ÙØ³Ø¬ÙŠ Ù…Ù„ÙƒÙŠ"></button>
                <button class="color-btn" onclick="insertColor('#c23616')" style="background: #c23616; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø£Ø­Ù…Ø± ØºØ§Ù…Ù‚"></button>
                <button class="color-btn" onclick="insertColor('#e1b12c')" style="background: #e1b12c; height: 50px; border: none; border-radius: 8px; cursor: pointer;" title="Ø°Ù‡Ø¨ÙŠ"></button>
            </div>
            <input type="text" id="customColor" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù„ÙˆÙ† (Ù…Ø«Ø§Ù„: #ff0000)" style="margin-bottom: 15px;">
            <div class="modal-buttons">
                <button style="background: #28a745; color: white;" onclick="insertCustomColor()">
                    <i class="fas fa-check"></i> ØªØ·Ø¨ÙŠÙ‚
                </button>
                <button style="background: #6c757d; color: white;" onclick="closeColorModal()">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Ù„Ù„ØªØ¸Ù„ÙŠÙ„ -->
    <div class="modal" id="highlightModal">
        <div class="modal-content">
            <h3><i class="fas fa-highlighter"></i> Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„ØªØ¸Ù„ÙŠÙ„</h3>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
                <button class="color-btn" onclick="insertHighlight('#fff3cd')" style="background: #fff3cd; height: 60px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; font-weight: 600; color: #856404;" title="Ø£ØµÙØ±">
                    ğŸŸ¡ Ø£ØµÙØ±
                </button>
                <button class="color-btn" onclick="insertHighlight('#d4edda')" style="background: #d4edda; height: 60px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; font-weight: 600; color: #155724;" title="Ø£Ø®Ø¶Ø±">
                    ğŸŸ¢ Ø£Ø®Ø¶Ø±
                </button>
                <button class="color-btn" onclick="insertHighlight('#d1ecf1')" style="background: #d1ecf1; height: 60px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; font-weight: 600; color: #0c5460;" title="Ø£Ø²Ø±Ù‚">
                    ğŸ”µ Ø£Ø²Ø±Ù‚
                </button>
                <button class="color-btn" onclick="insertHighlight('#ffe5d0')" style="background: #ffe5d0; height: 60px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; font-weight: 600; color: #8b4513;" title="Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ">
                    ğŸŸ  Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ
                </button>
                <button class="color-btn" onclick="insertHighlight('#f8d7da')" style="background: #f8d7da; height: 60px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; font-weight: 600; color: #721c24;" title="ÙˆØ±Ø¯ÙŠ">
                    ğŸ”´ ÙˆØ±Ø¯ÙŠ
                </button>
                <button class="color-btn" onclick="insertHighlight('#e8daef')" style="background: #e8daef; height: 60px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; font-weight: 600; color: #4a235a;" title="Ø¨Ù†ÙØ³Ø¬ÙŠ">
                    ğŸŸ£ Ø¨Ù†ÙØ³Ø¬ÙŠ
                </button>
            </div>
            <div class="modal-buttons">
                <button style="background: #6c757d; color: white;" onclick="closeHighlightModal()">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <script>
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            loadArticlesFromServer();
        };

        // Ø­ÙØ¸ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
        async function saveArticle() {
            const title = document.getElementById('articleTitle').value.trim();
            const content = document.getElementById('articleContent').innerHTML.trim();

            if (!title || !content) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰!');
                return;
            }

            const article = {
                title: title,
                content: content,
                author: 'Ø¯. ÙˆØ³ÙŠÙ…',
                published_date: new Date().toISOString()
            };

            try {
                // Ø­ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¹Ø¨Ø± RESTful API
                const response = await fetch('/tables/dr_wassim_articles', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(article)
                });

                if (!response.ok) throw new Error('ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸');

                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                const msg = document.getElementById('successMsg');
                msg.innerHTML = '<i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¬Ù…ÙŠØ¹ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ ğŸ‰';
                msg.style.display = 'block';
                setTimeout(() => {
                    msg.style.display = 'none';
                }, 4000);

                // Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                clearForm();
                loadArticlesFromServer();
            } catch (error) {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸: ' + error.message);
            }
        }

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù‚Ø§Ù„ ÙƒÙ…Ù„Ù JSON
        function exportArticle() {
            const title = document.getElementById('articleTitle').value.trim();
            const content = document.getElementById('articleContent').innerHTML.trim();

            if (!title || !content) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }

            const article = {
                title: title,
                content: content,
                author: 'Ø¯. ÙˆØ³ÙŠÙ…',
                date: new Date().toISOString()
            };

            const dataStr = JSON.stringify(article, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `article-${Date.now()}.json`;
            link.click();
        }

        // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù‚Ø§Ù„
        function previewArticle() {
            const title = document.getElementById('articleTitle').value.trim();
            const content = document.getElementById('articleContent').innerHTML.trim();

            if (!title || !content) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø£ÙˆÙ„Ø§Ù‹!');
                return;
            }

            const article = {
                title: title,
                content: content,
                author: 'Ø¯. ÙˆØ³ÙŠÙ…',
                date: new Date().toLocaleDateString('ar-EG')
            };

            localStorage.setItem('previewArticle', JSON.stringify(article));
            window.open('my-articles.html?preview=true', '_blank');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
        async function loadArticlesFromServer() {
            try {
                const response = await fetch('/tables/dr_wassim_articles?limit=100&sort=-created_at');
                const data = await response.json();
                const articles = data.data || [];
                const listDiv = document.getElementById('articlesList');

                if (articles.length === 0) {
                    listDiv.innerHTML = '<p style="color: #666; text-align: center; padding: 30px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯</p>';
                    return;
                }

                listDiv.innerHTML = articles.map(article => {
                    const date = new Date(article.published_date).toLocaleDateString('ar-EG', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });

                    return `
                        <div class="article-item">
                            <div class="article-info">
                                <h3>${article.title}</h3>
                                <p><i class="fas fa-calendar"></i> ${date}</p>
                            </div>
                            <div class="article-actions">
                                <button class="btn-edit" onclick="editArticle('${article.id}')">
                                    <i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„
                                </button>
                                <button class="btn-delete" onclick="deleteArticle('${article.id}')">
                                    <i class="fas fa-trash"></i> Ø­Ø°Ù
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª:', error);
                document.getElementById('articlesList').innerHTML = '<p style="color: #dc3545; text-align: center; padding: 30px;">âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</p>';
            }
        }

        // ØªØ¹Ø¯ÙŠÙ„ Ù…Ù‚Ø§Ù„
        async function editArticle(id) {
            try {
                const response = await fetch(`/tables/dr_wassim_articles/${id}`);
                const article = await response.json();

                if (article) {
                    document.getElementById('articleTitle').value = article.title;
                    document.getElementById('articleContent').innerHTML = article.content;
                    
                    // Ø­ÙØ¸ ID Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
                    window.editingArticleId = id;
                    
                    // ØªØºÙŠÙŠØ± Ù†Øµ Ø§Ù„Ø²Ø±
                    const saveBtn = document.querySelector('.btn-save');
                    saveBtn.innerHTML = '<i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‚Ø§Ù„';
                    saveBtn.onclick = updateArticle;
                    
                    window.scrollTo({top: 0, behavior: 'smooth'});
                }
            } catch (error) {
                alert('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ù‚Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯
        async function updateArticle() {
            const title = document.getElementById('articleTitle').value.trim();
            const content = document.getElementById('articleContent').value.trim();

            if (!title || !content) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰!');
                return;
            }

            try {
                const response = await fetch(`/tables/dr_wassim_articles/${window.editingArticleId}`, {
                    method: 'PUT',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        title: title,
                        content: content,
                        author: 'Ø¯. ÙˆØ³ÙŠÙ…',
                        published_date: new Date().toISOString()
                    })
                });

                if (!response.ok) throw new Error('ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«');

                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                const msg = document.getElementById('successMsg');
                msg.innerHTML = '<i class="fas fa-check-circle"></i> ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!';
                msg.style.display = 'block';
                setTimeout(() => {
                    msg.style.display = 'none';
                }, 3000);

                // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø²Ø±
                const saveBtn = document.querySelector('.btn-save');
                saveBtn.innerHTML = '<i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ù…Ù‚Ø§Ù„';
                saveBtn.onclick = saveArticle;
                delete window.editingArticleId;

                clearForm();
                loadArticlesFromServer();
            } catch (error) {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«: ' + error.message);
            }
        }

        // Ø­Ø°Ù Ù…Ù‚Ø§Ù„ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
        async function deleteArticle(id) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø§Ù„ØŸ Ø³ÙŠØªÙ… Ø­Ø°ÙÙ‡ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!')) {
                return;
            }

            try {
                const response = await fetch(`/tables/dr_wassim_articles/${id}`, {
                    method: 'DELETE'
                });

                if (!response.ok) throw new Error('ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù');

                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
                const msg = document.getElementById('successMsg');
                msg.innerHTML = '<i class="fas fa-check-circle"></i> ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­';
                msg.style.display = 'block';
                msg.style.background = '#f8d7da';
                msg.style.color = '#721c24';
                setTimeout(() => {
                    msg.style.display = 'none';
                    msg.style.background = '#d4edda';
                    msg.style.color = '#155724';
                }, 3000);

                loadArticlesFromServer();
            } catch (error) {
                alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù: ' + error.message);
            }
        }

        // Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        function clearForm() {
            document.getElementById('articleTitle').value = '';
            document.getElementById('articleContent').innerHTML = '';
        }

        // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†Øµ
        function formatText(command) {
            document.execCommand(command, false, null);
            document.getElementById('articleContent').focus();
        }

        // Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø³ÙŠÙ‚ (Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„ØªÙˆØ§ÙÙ‚)
        function insertFormat(before, after) {
            const editor = document.getElementById('articleContent');
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                const selectedText = range.toString() || 'Ù†Øµ';
                const span = document.createElement('span');
                span.textContent = selectedText;
                range.deleteContents();
                range.insertNode(span);
            }
            editor.focus();
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† ÙØ±Ø¹ÙŠ
        function insertHeading() {
            const editor = document.getElementById('articleContent');
            const selection = window.getSelection();
            const range = selection.getRangeAt(0);
            
            const h2 = document.createElement('h2');
            h2.textContent = 'Ø¹Ù†ÙˆØ§Ù† ÙØ±Ø¹ÙŠ';
            h2.style.cssText = 'color: #2c3e50; margin-top: 20px; margin-bottom: 10px; font-size: 1.5em; border-right: 4px solid #667eea; padding-right: 15px;';
            
            range.insertNode(h2);
            range.collapse(false);
            editor.focus();
        }

        // Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¦Ù…Ø© (Ù…Ø­ÙÙˆØ¸Ø©)
        function insertList() {
            formatText('insertUnorderedList');
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØµÙˆØ±Ø©
        function openImageModal() {
            document.getElementById('imageModal').style.display = 'flex';
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØµÙˆØ±Ø©
        function closeImageModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.getElementById('imageName').value = '';
        }

        // Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©
        function insertImage() {
            const imageName = document.getElementById('imageName').value.trim();
            
            if (!imageName) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„ØµÙˆØ±Ø©!');
                return;
            }

            const editor = document.getElementById('articleContent');
            const selection = window.getSelection();
            const range = selection.getRangeAt(0);
            
            const img = document.createElement('img');
            img.src = `images/${imageName}`;
            img.alt = 'ØµÙˆØ±Ø©';
            img.style.cssText = 'max-width: 100%; height: auto; border-radius: 10px; margin: 20px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.1);';
            
            range.insertNode(img);
            range.collapse(false);
            
            closeImageModal();
            editor.focus();
        }

        // Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø·
        function insertLink() {
            const url = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø·:');
            if (url) {
                const selection = window.getSelection();
                const selectedText = selection.toString() || 'Ø§Ø¶ØºØ· Ù‡Ù†Ø§';
                
                const a = document.createElement('a');
                a.href = url;
                a.textContent = selectedText;
                a.target = '_blank';
                a.style.cssText = 'color: #667eea; text-decoration: none; border-bottom: 2px solid #667eea;';
                
                const range = selection.getRangeAt(0);
                range.deleteContents();
                range.insertNode(a);
                range.collapse(false);
                
                document.getElementById('articleContent').focus();
            }
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        function openColorModal() {
            document.getElementById('colorModal').style.display = 'flex';
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        function closeColorModal() {
            document.getElementById('colorModal').style.display = 'none';
            document.getElementById('customColor').value = '';
        }

        // Ø¥Ø¶Ø§ÙØ© Ù„ÙˆÙ† Ù„Ù„Ù†Øµ
        function insertColor(color) {
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                const selectedText = range.toString() || 'Ù†Øµ Ù…Ù„ÙˆÙ†';
                
                const span = document.createElement('span');
                span.style.color = color;
                span.style.fontWeight = '600';
                span.textContent = selectedText;
                
                range.deleteContents();
                range.insertNode(span);
                range.collapse(false);
            }
            
            document.getElementById('articleContent').focus();
            closeColorModal();
        }

        // Ø¥Ø¶Ø§ÙØ© Ù„ÙˆÙ† Ù…Ø®ØµØµ
        function insertCustomColor() {
            const color = document.getElementById('customColor').value.trim();
            if (!color) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù„ÙˆÙ†!');
                return;
            }
            insertColor(color);
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¸Ù„ÙŠÙ„
        function openHighlightModal() {
            document.getElementById('highlightModal').style.display = 'flex';
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¸Ù„ÙŠÙ„
        function closeHighlightModal() {
            document.getElementById('highlightModal').style.display = 'none';
        }

        // ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ
        function insertHighlight(color) {
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                const selectedText = range.toString() || 'Ù†Øµ Ù…Ø¸Ù„Ù„';
                
                const mark = document.createElement('mark');
                mark.style.backgroundColor = color;
                mark.style.padding = '2px 6px';
                mark.style.borderRadius = '4px';
                mark.style.fontWeight = '600';
                mark.textContent = selectedText;
                
                range.deleteContents();
                range.insertNode(mark);
                range.collapse(false);
            }
            
            document.getElementById('articleContent').focus();
            closeHighlightModal();
        }
    </script>
</body>
</html>
