<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Test Smart Search</title>
</head>
<body>
    <h1>Test Smart Search Language</h1>
    <button onclick="testLanguage()">Test Language Detection</button>
    <div id="result"></div>

    <script src="js/unified-language-system.js"></script>
    <script src="js/data.js"></script>
    <script>
        function testLanguage() {
            const result = document.getElementById('result');
            
            // Test UnifiedLanguageSystem
            const sysLang = window.UnifiedLanguageSystem ? window.UnifiedLanguageSystem.currentLang : 'not found';
            const docLang = document.documentElement.lang;
            const savedLang = localStorage.getItem('wibohealth_language');
            
            // Test sample data
            const sampleFood = foodsDatabase[11]; // موز
            
            result.innerHTML = `
                <h3>Language Detection Results:</h3>
                <p><strong>UnifiedLanguageSystem.currentLang:</strong> ${sysLang}</p>
                <p><strong>document.documentElement.lang:</strong> ${docLang}</p>
                <p><strong>localStorage language:</strong> ${savedLang || 'not set'}</p>
                
                <h3>Sample Data (موز):</h3>
                <p><strong>ID:</strong> ${sampleFood.id}</p>
                <p><strong>name (AR):</strong> ${sampleFood.name}</p>
                <p><strong>nameEn:</strong> ${sampleFood.nameEn}</p>
                <p><strong>calories:</strong> ${sampleFood.nutrition?.calories}</p>
                
                <h3>Display Logic:</h3>
                <p><strong>Is Arabic?:</strong> ${sysLang === 'ar'}</p>
                <p><strong>Should display:</strong> ${sysLang === 'ar' ? sampleFood.name : sampleFood.nameEn}</p>
            `;
        }
    </script>
</body>
</html>
